-- Task 1: Create table and manipulate data
CREATE TABLE books (
    id INT IDENTITY(1,1) PRIMARY KEY,
    title NVARCHAR(100) NOT NULL,
    author NVARCHAR(100) NOT NULL,
    publication_year INT,
    is_available BIT DEFAULT 1
);

ALTER TABLE books ADD genre NVARCHAR(50);

INSERT INTO books (title, author, publication_year, genre) VALUES
('1984', 'George Orwell', 1949, 'Science Fiction'),
('To Kill a Mockingbird', 'Harper Lee', 1960, 'Fiction'),
('Pride and Prejudice', 'Jane Austen', 1813, 'Romance');

-- Task 2: Query, update, and delete data
-- Select books published before 1950
SELECT * FROM books WHERE publication_year < 1950;

-- Mark a book as unavailable
UPDATE books 
SET is_available = 0 
WHERE id = 1;

-- Delete a book by ID
DELETE FROM books 
WHERE id = 3;

-- Task 3: Stored Procedure to get available books
GO
CREATE PROCEDURE GetAvailableBooks
AS
BEGIN
    SELECT * FROM books WHERE is_available = 1;
END;
GO

-- Execute the stored procedure
EXEC GetAvailableBooks;